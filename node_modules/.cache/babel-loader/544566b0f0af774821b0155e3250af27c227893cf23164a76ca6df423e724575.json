{"ast":null,"code":"import React,{useEffect,useState}from'react';import s2 from'../../junior.module.css';import s from'./HW14.module.css';import axios from'axios';import SuperDebouncedInput from'./common/c8-SuperDebouncedInput/SuperDebouncedInput';import{useSearchParams}from'react-router-dom';/*\n* 1 - дописать функцию onChangeTextCallback в SuperDebouncedInput\n* 2 - дописать функцию sendQuery в HW14\n* 3 - дописать функцию onChangeText в HW14\n* 4 - сделать стили в соответствии с дизайном\n* 5 - добавить HW14 в HW5/pages/JuniorPlus\n* */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const getTechs=find=>{return axios.get('https://samurai.it-incubator.io/api/3.0/homework/test2',{params:{find}}).catch(e=>{var _e$response,_e$response$data;alert(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.errorText)||e.message);});};const HW14=()=>{const[find,setFind]=useState('');const[isLoading,setLoading]=useState(false);const[searchParams,setSearchParams]=useSearchParams();const[techs,setTechs]=useState([]);const sendQuery=value=>{setLoading(true);getTechs(value).then(res=>{if(res&&res.data){setTechs(res.data.techs);setLoading(false);}else{console.error('Invalid response format');setLoading(false);}}).catch(error=>{console.error('Error fetching techs:',error);setLoading(false);});};const onChangeText=value=>{setFind(value);// делает студент\nconst params=new URLSearchParams(searchParams);params.set('find',value);// добавить/заменить значение в квери урла\n// setSearchParams(\nsetSearchParams(params.toString());//\n};useEffect(()=>{const params=Object.fromEntries(searchParams);sendQuery(params.find||'');setFind(params.find||'');},[]);const mappedTechs=techs.map(t=>/*#__PURE__*/_jsx(\"div\",{id:'hw14-tech-'+t,className:s.tech,children:t},t));return/*#__PURE__*/_jsxs(\"div\",{id:'hw14',children:[/*#__PURE__*/_jsx(\"div\",{className:s2.hwTitle,children:\"Homework #14\"}),/*#__PURE__*/_jsxs(\"div\",{className:s2.hw,children:[/*#__PURE__*/_jsx(SuperDebouncedInput,{id:'hw14-super-debounced-input',value:find,onChangeText:onChangeText,onDebouncedChange:sendQuery}),/*#__PURE__*/_jsx(\"div\",{id:'hw14-loading',className:s.loading,children:isLoading?'...ищем':/*#__PURE__*/_jsx(\"br\",{})}),mappedTechs]})]});};export default HW14;","map":{"version":3,"names":["React","useEffect","useState","s2","s","axios","SuperDebouncedInput","useSearchParams","jsx","_jsx","jsxs","_jsxs","getTechs","find","get","params","catch","e","_e$response","_e$response$data","alert","response","data","errorText","message","HW14","setFind","isLoading","setLoading","searchParams","setSearchParams","techs","setTechs","sendQuery","value","then","res","console","error","onChangeText","URLSearchParams","set","toString","Object","fromEntries","mappedTechs","map","t","id","className","tech","children","hwTitle","hw","onDebouncedChange","loading"],"sources":["/Users/vld/WebTools/css_projects/src/pages/Junior/s2/hw14/HW14.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport s2 from '../../junior.module.css'\nimport s from './HW14.module.css'\nimport axios from 'axios'\nimport SuperDebouncedInput from './common/c8-SuperDebouncedInput/SuperDebouncedInput'\nimport {useSearchParams} from 'react-router-dom'\n\n/*\n* 1 - дописать функцию onChangeTextCallback в SuperDebouncedInput\n* 2 - дописать функцию sendQuery в HW14\n* 3 - дописать функцию onChangeText в HW14\n* 4 - сделать стили в соответствии с дизайном\n* 5 - добавить HW14 в HW5/pages/JuniorPlus\n* */\n\nconst getTechs = (find: string) => {\n    return axios\n        .get<{ techs: string[] }>(\n            'https://samurai.it-incubator.io/api/3.0/homework/test2',\n            {params: {find}}\n        )\n        .catch((e) => {\n            alert(e.response?.data?.errorText || e.message)\n        })\n}\n\nconst HW14 = () => {\n    const [find, setFind] = useState('')\n    const [isLoading, setLoading] = useState(false)\n    const [searchParams, setSearchParams] = useSearchParams()\n    const [techs, setTechs] = useState<string[]>([])\n\n    const sendQuery = (value: string) => {\n        setLoading(true)\n        getTechs(value)\n            .then((res) => {\n                if (res && res.data) {\n                    setTechs(res.data.techs);\n                    setLoading(false);\n                } else {\n                    console.error('Invalid response format');\n                    setLoading(false);\n                }\n            })\n            .catch((error) => {\n                console.error('Error fetching techs:', error);\n                setLoading(false);\n            });\n    }\n\n    const onChangeText = (value: string) => {\n        setFind(value)\n        // делает студент\n        const params = new URLSearchParams(searchParams);\n        params.set('find', value);\n        // добавить/заменить значение в квери урла\n        // setSearchParams(\n        setSearchParams(params.toString());\n        //\n    }\n\n    useEffect(() => {\n        const params = Object.fromEntries(searchParams)\n        sendQuery(params.find || '')\n        setFind(params.find || '')\n    }, [])\n\n    const mappedTechs = techs.map(t => (\n        <div key={t} id={'hw14-tech-' + t} className={s.tech}>\n            {t}\n        </div>\n    ))\n\n    return (\n        <div id={'hw14'}>\n            <div className={s2.hwTitle}>Homework #14</div>\n\n            <div className={s2.hw}>\n                <SuperDebouncedInput\n                    id={'hw14-super-debounced-input'}\n                    value={find}\n                    onChangeText={onChangeText}\n                    onDebouncedChange={sendQuery}\n                />\n\n                <div id={'hw14-loading'} className={s.loading}>\n                    {isLoading ? '...ищем' : <br/>}\n                </div>\n\n                {mappedTechs}\n            </div>\n        </div>\n    )\n}\n\nexport default HW14\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}