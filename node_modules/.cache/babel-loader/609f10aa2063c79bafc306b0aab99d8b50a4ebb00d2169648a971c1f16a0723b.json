{"ast":null,"code":"var _jsxFileName = \"/Users/vld/WebTools/css_projects/src/pages/Junior/s2/hw15/HW15.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport s2 from '../../junior.module.css';\nimport s from './HW15.module.css';\nimport axios from 'axios';\nimport SuperPagination from './common/c9-SuperPagination/SuperPagination';\nimport { useSearchParams } from 'react-router-dom';\nimport SuperSort from './common/c10-SuperSort/SuperSort';\nimport { CircularProgress } from \"@mui/material\";\n\n/*\n* 1 - дописать SuperPagination\n* 2 - дописать SuperSort\n* 3 - проверить pureChange тестами\n* 3 - дописать sendQuery, onChangePagination, onChangeSort в HW15\n* 4 - сделать стили в соответствии с дизайном\n* 5 - добавить HW15 в HW5/pages/JuniorPlus\n* */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getTechs = params => {\n  return axios.get('https://samurai.it-incubator.io/api/3.0/homework/test3', {\n    params\n  }).catch(e => {\n    var _e$response, _e$response$data;\n    alert(((_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.errorText) || e.message);\n  });\n};\nconst HW15 = () => {\n  _s();\n  const [sort, setSort] = useState('');\n  const [page, setPage] = useState(1);\n  const [count, setCount] = useState(4);\n  const [idLoading, setLoading] = useState(false);\n  const [totalCount, setTotalCount] = useState(100);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [techs, setTechs] = useState([]);\n  const sendQuery = params => {\n    setLoading(true);\n    getTechs(params).then(res => {\n      // делает студент\n      if (res) {\n        setTechs(res.data.techs);\n        setTotalCount(res.data.totalCount);\n      }\n      // сохранить пришедшие данные\n\n      //\n    }).finally(() => {\n      setLoading(false);\n    });\n  };\n  const onChangePagination = (newPage, newCount) => {\n    setPage(newPage);\n    setCount(newCount);\n    sendQuery({\n      page: newPage,\n      count: newCount\n    });\n    setSearchParams(new URLSearchParams({\n      page: newPage.toString(),\n      count: newCount.toString()\n    }));\n  };\n  const onChangeSort = newSort => {\n    setSort(newSort);\n    setPage(1); // Reset to first page when sorting\n    sendQuery({\n      page: 1,\n      count,\n      sort: newSort\n    });\n    setSearchParams(new URLSearchParams({\n      page: '1',\n      count: count.toString(),\n      sort: newSort\n    }));\n  };\n  useEffect(() => {\n    const params = Object.fromEntries(searchParams);\n    sendQuery({\n      page: params.page,\n      count: params.count\n    });\n    setPage(+params.page || 1);\n    setCount(+params.count || 4);\n  }, []);\n  const mappedTechs = techs.map(t => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: s.row,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: 'hw15-tech-' + t.id,\n      className: s.tech,\n      children: t.tech\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: 'hw15-developer-' + t.id,\n      className: s.developer,\n      children: t.developer\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this)]\n  }, t.id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 9\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: 'hw15',\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: s2.hwTitle,\n      children: \"Homework #15\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s2.hw,\n      children: [/*#__PURE__*/_jsxDEV(SuperPagination, {\n        page: page,\n        count: count,\n        totalCount: totalCount,\n        onChange: onChangePagination\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.rowHeader,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: s.techHeader,\n          children: [\"tech\", /*#__PURE__*/_jsxDEV(SuperSort, {\n            sort: sort,\n            value: 'tech',\n            onChange: onChangeSort\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: s.developerHeader,\n          children: [\"developer\", /*#__PURE__*/_jsxDEV(SuperSort, {\n            sort: sort,\n            value: 'developer',\n            onChange: onChangeSort\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this), mappedTechs, idLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        id: 'hw15-loading',\n        className: s.loading,\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 9\n  }, this);\n};\n_s(HW15, \"GM1FvKwxLciyRgVExk1cCv01h5I=\", false, function () {\n  return [useSearchParams];\n});\n_c = HW15;\nexport default HW15;\nvar _c;\n$RefreshReg$(_c, \"HW15\");","map":{"version":3,"names":["React","useEffect","useState","s2","s","axios","SuperPagination","useSearchParams","SuperSort","CircularProgress","jsxDEV","_jsxDEV","getTechs","params","get","catch","e","_e$response","_e$response$data","alert","response","data","errorText","message","HW15","_s","sort","setSort","page","setPage","count","setCount","idLoading","setLoading","totalCount","setTotalCount","searchParams","setSearchParams","techs","setTechs","sendQuery","then","res","finally","onChangePagination","newPage","newCount","URLSearchParams","toString","onChangeSort","newSort","Object","fromEntries","mappedTechs","map","t","className","row","children","id","tech","fileName","_jsxFileName","lineNumber","columnNumber","developer","hwTitle","hw","onChange","rowHeader","techHeader","value","developerHeader","loading","_c","$RefreshReg$"],"sources":["/Users/vld/WebTools/css_projects/src/pages/Junior/s2/hw15/HW15.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport s2 from '../../junior.module.css'\nimport s from './HW15.module.css'\nimport axios from 'axios'\nimport SuperPagination from './common/c9-SuperPagination/SuperPagination'\nimport {useSearchParams} from 'react-router-dom'\nimport SuperSort from './common/c10-SuperSort/SuperSort'\nimport {CircularProgress} from \"@mui/material\";\n\n/*\n* 1 - дописать SuperPagination\n* 2 - дописать SuperSort\n* 3 - проверить pureChange тестами\n* 3 - дописать sendQuery, onChangePagination, onChangeSort в HW15\n* 4 - сделать стили в соответствии с дизайном\n* 5 - добавить HW15 в HW5/pages/JuniorPlus\n* */\n\ntype TechType = {\n    id: number\n    tech: string\n    developer: string\n}\n\ntype ParamsType = {\n    sort: string\n    page: number\n    count: number\n}\n\nconst getTechs = (params: ParamsType) => {\n    return axios\n        .get<{ techs: TechType[], totalCount: number }>(\n            'https://samurai.it-incubator.io/api/3.0/homework/test3',\n            {params}\n        )\n        .catch((e) => {\n            alert(e.response?.data?.errorText || e.message)\n        })\n}\n\nconst HW15 = () => {\n    const [sort, setSort] = useState('')\n    const [page, setPage] = useState(1)\n    const [count, setCount] = useState(4)\n    const [idLoading, setLoading] = useState(false)\n    const [totalCount, setTotalCount] = useState(100)\n    const [searchParams, setSearchParams] = useSearchParams()\n    const [techs, setTechs] = useState<TechType[]>([])\n\n    const sendQuery = (params: any) => {\n        setLoading(true)\n        getTechs(params)\n            .then((res) => {\n                // делает студент\n                if (res) {\n                    setTechs(res.data.techs)\n                    setTotalCount(res.data.totalCount)\n                }\n                // сохранить пришедшие данные\n\n                //\n            })\n            .finally(() => {\n                setLoading(false)\n            })\n    }\n    const onChangePagination = (newPage: number, newCount: number) => {\n        setPage(newPage);\n        setCount(newCount);\n        sendQuery({page: newPage, count: newCount});\n        setSearchParams(new URLSearchParams({page: newPage.toString(), count: newCount.toString()}));\n    }\n\n    const onChangeSort = (newSort: string) => {\n        setSort(newSort);\n        setPage(1); // Reset to first page when sorting\n        sendQuery({page: 1, count, sort: newSort});\n        setSearchParams(new URLSearchParams({page: '1', count: count.toString(), sort: newSort}));\n    }\n    useEffect(() => {\n        const params = Object.fromEntries(searchParams)\n        sendQuery({page: params.page, count: params.count})\n        setPage(+params.page || 1)\n        setCount(+params.count || 4)\n    }, [])\n\n    const mappedTechs = techs.map(t => (\n        <div key={t.id} className={s.row}>\n            <div id={'hw15-tech-' + t.id} className={s.tech}>\n                {t.tech}\n            </div>\n\n            <div id={'hw15-developer-' + t.id} className={s.developer}>\n                {t.developer}\n            </div>\n        </div>\n    ))\n\n    return (\n        <div id={'hw15'}>\n            <div className={s2.hwTitle}>Homework #15</div>\n\n            <div className={s2.hw}>\n                <SuperPagination\n                    page={page}\n                    count={count}\n                    totalCount={totalCount}\n                    onChange={onChangePagination}\n                />\n\n                <div className={s.rowHeader}>\n                    <div className={s.techHeader}>\n                        tech\n                        <SuperSort sort={sort} value={'tech'} onChange={onChangeSort}/>\n                    </div>\n\n                    <div className={s.developerHeader}>\n                        developer\n                        <SuperSort sort={sort} value={'developer'} onChange={onChangeSort}/>\n                    </div>\n                </div>\n\n                {mappedTechs}\n\n                {idLoading && (\n                    <div id={'hw15-loading'} className={s.loading}>\n                        <CircularProgress/>\n                    </div>\n                )}\n            </div>\n        </div>\n    )\n}\nexport default HW15\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}