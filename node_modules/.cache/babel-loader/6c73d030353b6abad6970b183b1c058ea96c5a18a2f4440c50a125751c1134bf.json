{"ast":null,"code":"import React,{useEffect,useState}from'react';import s2 from'../../junior.module.css';import s from'./HW15.module.css';import axios from'axios';import SuperPagination from'./common/c9-SuperPagination/SuperPagination';import{useSearchParams}from'react-router-dom';import SuperSort from'./common/c10-SuperSort/SuperSort';import{CircularProgress}from\"@mui/material\";/*\n* 1 - дописать SuperPagination\n* 2 - дописать SuperSort\n* 3 - проверить pureChange тестами\n* 3 - дописать sendQuery, onChangePagination, onChangeSort в HW15\n* 4 - сделать стили в соответствии с дизайном\n* 5 - добавить HW15 в HW5/pages/JuniorPlus\n* */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const getTechs=params=>{return axios.get('https://samurai.it-incubator.io/api/3.0/homework/test3',{params}).catch(e=>{var _e$response,_e$response$data;alert(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.errorText)||e.message);});};const HW15=()=>{const[sort,setSort]=useState('');const[page,setPage]=useState(1);const[count,setCount]=useState(4);const[idLoading,setLoading]=useState(false);const[totalCount,setTotalCount]=useState(100);const[searchParams,setSearchParams]=useSearchParams();const[techs,setTechs]=useState([]);const sendQuery=params=>{setLoading(true);getTechs(params).then(res=>{// делает студент\nif(res){setTechs(res.data.techs);setTotalCount(res.data.totalCount);}// сохранить пришедшие данные\n//\n}).finally(()=>{setLoading(false);});};const onChangePagination=(newPage,newCount)=>{setPage(newPage);setCount(newCount);sendQuery({page:newPage,count:newCount});setSearchParams(new URLSearchParams({page:newPage.toString(),count:newCount.toString()}));};const onChangeSort=newSort=>{setSort(newSort);setPage(1);// Reset to first page when sorting\nsendQuery({page:1,count,sort:newSort});setSearchParams(new URLSearchParams({page:'1',count:count.toString(),sort:newSort}));};useEffect(()=>{const params=Object.fromEntries(searchParams);sendQuery({page:params.page,count:params.count});setPage(+params.page||1);setCount(+params.count||4);},[]);const mappedTechs=techs.map(t=>/*#__PURE__*/_jsxs(\"div\",{className:s.row,children:[/*#__PURE__*/_jsx(\"div\",{id:'hw15-tech-'+t.id,className:s.tech,children:t.tech}),/*#__PURE__*/_jsx(\"div\",{id:'hw15-developer-'+t.id,className:s.developer,children:t.developer})]},t.id));return/*#__PURE__*/_jsxs(\"div\",{id:'hw15',children:[/*#__PURE__*/_jsx(\"div\",{className:s2.hwTitle,children:\"Homework #15\"}),/*#__PURE__*/_jsxs(\"div\",{className:s2.hw,children:[/*#__PURE__*/_jsx(SuperPagination,{page:page,count:count,totalCount:totalCount,onChange:onChangePagination}),/*#__PURE__*/_jsxs(\"div\",{className:s.rowHeader,children:[/*#__PURE__*/_jsxs(\"div\",{className:s.techHeader,children:[\"tech\",/*#__PURE__*/_jsx(SuperSort,{sort:sort,value:'tech',onChange:onChangeSort})]}),/*#__PURE__*/_jsxs(\"div\",{className:s.developerHeader,children:[\"developer\",/*#__PURE__*/_jsx(SuperSort,{sort:sort,value:'developer',onChange:onChangeSort})]})]}),mappedTechs,idLoading&&/*#__PURE__*/_jsx(\"div\",{id:'hw15-loading',className:s.loading,children:/*#__PURE__*/_jsx(CircularProgress,{})})]})]});};export default HW15;","map":{"version":3,"names":["React","useEffect","useState","s2","s","axios","SuperPagination","useSearchParams","SuperSort","CircularProgress","jsx","_jsx","jsxs","_jsxs","getTechs","params","get","catch","e","_e$response","_e$response$data","alert","response","data","errorText","message","HW15","sort","setSort","page","setPage","count","setCount","idLoading","setLoading","totalCount","setTotalCount","searchParams","setSearchParams","techs","setTechs","sendQuery","then","res","finally","onChangePagination","newPage","newCount","URLSearchParams","toString","onChangeSort","newSort","Object","fromEntries","mappedTechs","map","t","className","row","children","id","tech","developer","hwTitle","hw","onChange","rowHeader","techHeader","value","developerHeader","loading"],"sources":["/Users/vld/WebTools/css_projects/src/pages/Junior/s2/hw15/HW15.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport s2 from '../../junior.module.css'\nimport s from './HW15.module.css'\nimport axios from 'axios'\nimport SuperPagination from './common/c9-SuperPagination/SuperPagination'\nimport {useSearchParams} from 'react-router-dom'\nimport SuperSort from './common/c10-SuperSort/SuperSort'\nimport {CircularProgress} from \"@mui/material\";\n\n/*\n* 1 - дописать SuperPagination\n* 2 - дописать SuperSort\n* 3 - проверить pureChange тестами\n* 3 - дописать sendQuery, onChangePagination, onChangeSort в HW15\n* 4 - сделать стили в соответствии с дизайном\n* 5 - добавить HW15 в HW5/pages/JuniorPlus\n* */\n\ntype TechType = {\n    id: number\n    tech: string\n    developer: string\n}\n\ntype ParamsType = {\n    sort: string\n    page: number\n    count: number\n}\n\nconst getTechs = (params: ParamsType) => {\n    return axios\n        .get<{ techs: TechType[], totalCount: number }>(\n            'https://samurai.it-incubator.io/api/3.0/homework/test3',\n            {params}\n        )\n        .catch((e) => {\n            alert(e.response?.data?.errorText || e.message)\n        })\n}\n\nconst HW15 = () => {\n    const [sort, setSort] = useState('')\n    const [page, setPage] = useState(1)\n    const [count, setCount] = useState(4)\n    const [idLoading, setLoading] = useState(false)\n    const [totalCount, setTotalCount] = useState(100)\n    const [searchParams, setSearchParams] = useSearchParams()\n    const [techs, setTechs] = useState<TechType[]>([])\n\n    const sendQuery = (params: any) => {\n        setLoading(true)\n        getTechs(params)\n            .then((res) => {\n                // делает студент\n                if (res) {\n                    setTechs(res.data.techs)\n                    setTotalCount(res.data.totalCount)\n                }\n                // сохранить пришедшие данные\n\n                //\n            })\n            .finally(() => {\n                setLoading(false)\n            })\n    }\n    const onChangePagination = (newPage: number, newCount: number) => {\n        setPage(newPage);\n        setCount(newCount);\n        sendQuery({page: newPage, count: newCount});\n        setSearchParams(new URLSearchParams({page: newPage.toString(), count: newCount.toString()}));\n    }\n\n    const onChangeSort = (newSort: string) => {\n        setSort(newSort);\n        setPage(1); // Reset to first page when sorting\n        sendQuery({page: 1, count, sort: newSort});\n        setSearchParams(new URLSearchParams({page: '1', count: count.toString(), sort: newSort}));\n    }\n    useEffect(() => {\n        const params = Object.fromEntries(searchParams)\n        sendQuery({page: params.page, count: params.count})\n        setPage(+params.page || 1)\n        setCount(+params.count || 4)\n    }, [])\n\n    const mappedTechs = techs.map(t => (\n        <div key={t.id} className={s.row}>\n            <div id={'hw15-tech-' + t.id} className={s.tech}>\n                {t.tech}\n            </div>\n\n            <div id={'hw15-developer-' + t.id} className={s.developer}>\n                {t.developer}\n            </div>\n        </div>\n    ))\n\n    return (\n        <div id={'hw15'}>\n            <div className={s2.hwTitle}>Homework #15</div>\n\n            <div className={s2.hw}>\n                <SuperPagination\n                    page={page}\n                    count={count}\n                    totalCount={totalCount}\n                    onChange={onChangePagination}\n                />\n\n                <div className={s.rowHeader}>\n                    <div className={s.techHeader}>\n                        tech\n                        <SuperSort sort={sort} value={'tech'} onChange={onChangeSort}/>\n                    </div>\n\n                    <div className={s.developerHeader}>\n                        developer\n                        <SuperSort sort={sort} value={'developer'} onChange={onChangeSort}/>\n                    </div>\n                </div>\n\n                {mappedTechs}\n\n                {idLoading && (\n                    <div id={'hw15-loading'} className={s.loading}>\n                        <CircularProgress/>\n                    </div>\n                )}\n            </div>\n        </div>\n    )\n}\nexport default HW15\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}